{% extends 'base.html' %}

{% block title %}Initialize Uplink - CloudShare{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto py-12">

    <div class="mb-10 text-center">
        <div
            class="inline-flex items-center justify-center size-16 rounded-xl bg-primary/10 border border-primary/20 text-primary mb-6 shadow-neon">
            <span class="material-symbols-outlined text-3xl animate-pulse">link</span>
        </div>
        <h1 class="text-4xl font-black text-white tracking-tight uppercase leading-none">Initialize <span
                class="text-primary text-glow">Uplink</span></h1>
        <p class="text-text-muted mt-4 text-lg">Configuring secure access portal for selected data vector.</p>
    </div>


    <div class="bg-surface-dark border border-surface-border rounded-2xl shadow-panel overflow-hidden">
        <div class="flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-surface-border">

            <div class="w-full md:w-1/3 p-8 bg-background-dark/30 flex flex-col items-center text-center">
                <div
                    class="size-24 rounded-2xl bg-surface-dark border border-surface-border flex items-center justify-center text-primary shadow-neon mb-6">
                    <span class="material-symbols-outlined text-5xl">
                        {% if file.original_name|lower|slice:"-4:" == ".pdf" %}picture_as_pdf
                        {% elif file.original_name|lower|slice:"-4:" == ".png" or file.original_name|lower|slice:"-4:" == ".jpg" %}image
                        {% elif file.original_name|lower|slice:"-4:" == ".zip" %}folder_zip
                        {% else %}description{% endif %}
                    </span>
                </div>
                <h3 class="text-white font-bold text-lg truncate w-full mb-1">{{ file.original_name }}</h3>
                <p class="text-text-muted text-xs font-mono uppercase tracking-widest">{{ file.size|filesizeformat }}
                </p>

                <div class="mt-8 w-full space-y-3">
                    <div class="flex justify-between text-[10px] font-bold uppercase tracking-widest">
                        <span class="text-text-muted">Security</span>
                        <span class="text-emerald-400">Optimal</span>
                    </div>
                    <div class="flex justify-between text-[10px] font-bold uppercase tracking-widest">
                        <span class="text-text-muted">Encryption</span>
                        <span class="text-white">AES-256</span>
                    </div>
                </div>
            </div>


            <div class="w-full md:w-2/3 p-8">
                <form action="{% url 'generate_secure_link' file.id %}" method="POST" class="space-y-8">
                    {% csrf_token %}


                    <div class="space-y-4">
                        <label
                            class="text-[10px] font-black text-white uppercase tracking-[0.2em] flex items-center gap-2">
                            <span class="material-symbols-outlined text-primary text-lg">timer</span>
                            Time To Live (TTL)
                        </label>
                        <div class="grid grid-cols-2 gap-3">
                            <label class="cursor-pointer group">
                                <input type="radio" name="expiry" value="30m" class="peer sr-only">
                                <div
                                    class="h-14 flex items-center justify-center rounded-lg border border-surface-border bg-background-dark text-text-muted font-bold transition-all group-hover:border-primary/50 group-hover:text-white peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:text-primary peer-checked:shadow-neon">
                                    30 MINUTES
                                </div>
                            </label>
                            <label class="cursor-pointer group">
                                <input type="radio" name="expiry" value="1h" class="peer sr-only" checked>
                                <div
                                    class="h-14 flex items-center justify-center rounded-lg border border-surface-border bg-background-dark text-text-muted font-bold transition-all group-hover:border-primary/50 group-hover:text-white peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:text-primary peer-checked:shadow-neon">
                                    1 HOUR
                                </div>
                            </label>
                            <label class="cursor-pointer group">
                                <input type="radio" name="expiry" value="24h" class="peer sr-only">
                                <div
                                    class="h-14 flex items-center justify-center rounded-lg border border-surface-border bg-background-dark text-text-muted font-bold transition-all group-hover:border-primary/50 group-hover:text-white peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:text-primary peer-checked:shadow-neon">
                                    24 HOURS
                                </div>
                            </label>
                            <label class="cursor-pointer group">
                                <input type="radio" name="expiry" value="48h" class="peer sr-only">
                                <div
                                    class="h-14 flex items-center justify-center rounded-lg border border-surface-border bg-background-dark text-text-muted font-bold transition-all group-hover:border-primary/50 group-hover:text-white peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:text-primary peer-checked:shadow-neon">
                                    48 HOURS
                                </div>
                            </label>
                            <label class="cursor-pointer group">
                                <input type="radio" name="expiry" value="2d" class="peer sr-only">
                                <div
                                    class="h-14 flex items-center justify-center rounded-lg border border-surface-border bg-background-dark text-text-muted font-bold transition-all group-hover:border-primary/50 group-hover:text-white peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:text-primary peer-checked:shadow-neon">
                                    2 DAYS
                                </div>
                            </label>
                            <label class="cursor-pointer group">
                                <input type="radio" name="expiry" value="7d" class="peer sr-only">
                                <div
                                    class="h-14 flex items-center justify-center rounded-lg border border-surface-border bg-background-dark text-text-muted font-bold transition-all group-hover:border-primary/50 group-hover:text-white peer-checked:border-primary peer-checked:bg-primary/10 peer-checked:text-primary peer-checked:shadow-neon">
                                    7 DAYS
                                </div>
                            </label>
                        </div>
                    </div>


                    <div class="space-y-4 pt-6 border-t border-surface-border">
                        <label
                            class="text-[10px] font-black text-white uppercase tracking-[0.2em] flex items-center gap-2">
                            <span class="material-symbols-outlined text-primary text-lg">shield</span>
                            Security Protocols
                        </label>
                        <div class="space-y-3">
                            <div
                                class="p-4 rounded-lg bg-background-dark/50 border border-surface-border flex items-center justify-between group hover:border-primary/30 transition-colors">
                                <div>
                                    <p class="text-sm font-bold text-white uppercase tracking-wide">Auto-Destruct</p>
                                    <p class="text-[10px] text-text-muted uppercase tracking-wider">Purge vector after
                                        TTL expiration</p>
                                </div>
                                <span class="material-symbols-outlined text-emerald-400">check_circle</span>
                            </div>
                            <div
                                class="p-4 rounded-lg bg-background-dark/50 border border-surface-border flex items-center justify-between group opacity-50">
                                <div>
                                    <p class="text-sm font-bold text-white uppercase tracking-wide">Password Protection
                                    </p>
                                    <p class="text-[10px] text-text-muted uppercase tracking-wider">Requires higher
                                        security clearance (Pro)</p>
                                </div>
                                <span class="material-symbols-outlined">lock</span>
                            </div>
                        </div>
                    </div>


                    <div class="flex items-center gap-4 pt-4">
                        <button type="submit"
                            class="flex-1 h-14 bg-primary hover:bg-primary-hover text-white font-black tracking-[0.2em] uppercase rounded-xl shadow-neon transition-all flex items-center justify-center gap-3 active:scale-[0.98]">
                            <span class="material-symbols-outlined text-2xl">rocket_launch</span>
                            Generate Link
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <div class="mt-8 text-center">
        <a href="{% url 'file_detail' file.id %}"
            class="text-xs font-bold text-text-muted hover:text-white uppercase tracking-widest transition-colors flex items-center justify-center gap-2">
            <span class="material-symbols-outlined text-sm">arrow_back</span>
            Abort Operation
        </a>
    </div>
</div>
{% endblock %}